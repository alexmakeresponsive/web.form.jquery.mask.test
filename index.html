<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>String: length</title>

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="mini-default.css">
        <style>
            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
            }
            .pageWr {
                max-width: 640px;
                margin: auto;
                padding-top: 100px;
                padding-bottom: 100px;
            }
        </style>
    </head>
    <body>

   <div class="pageWr">
       <form>
           <fieldset>
               <legend>Simple form</legend>
               <input id="only-upper" type="text" size="2">
           </fieldset>
           <fieldset>

               <legend>Simple form</legend>
               <label for="username">Username</label>
               <input type="text" id="Username" placeholder="Username"/>

           </fieldset>
       </form>
       <div>
           <table>
               <caption>Results</caption>
               <thead>
               <tr>
                   <th>Name parameter</th>
                   <th>Value </th>
               </tr>
               </thead>
               <tbody>
               <tr>
                   <td>Input value</td>
                   <td data-label="inputValue">-</td>
               </tr>

               </tbody>
           </table>
       </div>
   </div>
        <script src="1.10.2.min.js"></script>
        <script>
            var body = document.body;
            var inputUsername = body.querySelector('#Username');



            inputUsername.addEventListener('keydown', function (e) {
//                e.preventDefault();

//                return false;

                var key = e.key.replace(/[^0-9]+/g, '');
                var keyCode = e.keyCode;
                var input = e.target;
                    input.value = '';


                var inputValueCurrent = e.target.value;
                var inputValueCurrentLength = inputValueCurrent.length;

                var inputValueNew = e.target.value + key;
                var inputValueNewLength = inputValueNew.length;

                var inputValueDeleted = e.target.value.slice(0, e.target.value.length-1);




                if (keyCode === 8) {
                    input.value = inputValueDeleted;
                }

                if ( inputValueNewLength < 4 && keyCode !== 8 ) {
                    console.log('inputValueCurrent = ', inputValueCurrent);
                    input.value = inputValueNew;
                }
            });





            function getChar(event) {
                if (event.which == null) { // IE
                    if (event.keyCode < 32) return null; // спец. символ
                    return String.fromCharCode(event.keyCode)
                }

                if (event.which != 0 && event.charCode != 0) { // все кроме IE
                    if (event.which < 32) return null; // спец. символ
                    return String.fromCharCode(event.which); // остальные
                }

                return null; // спец. символ
            }

            function filterAmount(e) {
                // спец. сочетание - не обрабатываем
                if (e.ctrlKey || e.altKey || e.metaKey) return;

                var char = getChar(e);

//                if (!char) return; // спец. символ - не обрабатываем
//                if (!char) char = ''; // спец. символ - не обрабатываем

                console.log( char );
                console.log( e.target.value );

                this.value = '';
//                this.value = char.toUpperCase();
                this.value = char.replace(/[^0-9]+/g, '');


                return false;
            }


            document.getElementById('only-upper').onkeypress = filterAmount;
            document.getElementById('only-upper').onkeydown = filterAmount;

        </script>

    </body>
</html>